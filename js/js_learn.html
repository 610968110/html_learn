<html lang="zh-CN">


<head>
    <meta charset="UTF-8">
    <meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js</title>

    <style>
        div {
            text-align: center
        }
    </style>
</head>

<!-- onload 和 onunload 事件会在用户进入或离开页面时被触发。-->

<body>
    <div>
        <script>
            function getDate() {
                document.getElementById("btn_date").innerHTML = new Date();
            }
        </script>
        <button id="btn_date" onclick="getDate()">显示日期</button>
    </div>

    <div>
        <script>
            function addH1() {
                document.write("<h1>这是一个标题</h1>");
                document.write("<p>这是一个段落。</p>");
            }
        </script>
        <button onclick="addH1()">addH1</button>
    </div>

    <div>
        <button onclick="alert('欢迎')">弹窗</button>
    </div>

    <div>
        <script>
            function changeImg() {
                view = document.getElementById('changeImg')
                view.src = view.src.match('img1') ? "../img.png" : "../img1.png";
            }
        </script>
        <div>点我变图片</div>
        <img id="changeImg" src="../img.png" alt="图片" width="80px" height="80px" onclick="changeImg()">
    </div>

    <div>
        <script>
            var i = 0;
            function changeColor(view) {
                if (i % 2 == 0) {
                    view.style.color = '#00ff00'
                } else {
                    view.style.color = '#00ffff'
                }
                i++;
            }
        </script>
        <div id="changeColor" onclick="changeColor(this)" style="cursor: pointer">点我变颜色</div>
    </div>

    <div>
        <p>请输入数字。如果输入值不是数字，浏览器会弹出提示框。</p>
        <input id="inputNum" type="text">
        <script>
            function isNum() {
                var x = document.getElementById("inputNum").value;
                // typeof 可以获取类型
                if (x == "" || isNaN(x)) {
                    alert(x + " 不是数字");
                }
            }
        </script>
        <button type="button" onclick="isNum()">点击这里</button>
    </div>

    <!--
        使用 window.alert() 弹出警告框。
        使用 document.write() 方法将内容写到 HTML 文档中。
        使用 innerHTML 写入到 HTML 元素。
        使用 console.log() 写入到浏览器的控制台。 

        onchange	HTML 元素改变
        onclick	用户点击 HTML 元素
        onmouseover	用户在一个HTML元素上移动鼠标
        onmouseout	用户从一个HTML元素上移开鼠标
        onkeydown	用户按下键盘按键
        onload	浏览器已完成页面的加载
    -->

    <div>
        <p>创建 JavaScript 对象。</p>
        <p id="demo"></p>
        <script>
            // 键必须是String，键值不能使null
            var person = {
                firstName: "John",
                age: 50,
                eyeColor: "blue",
                like: function () { return "跑步" }
            };
            document.getElementById("demo").innerHTML =
                person.firstName + " 现在 " + person.age + " 岁. 喜欢 " + person.like();
        </script>
    </div>

    <div>
        <style>
            .num {
                font-size: 12px;
                width: 30px;
                height: 30px;
                text-align: center;
            }
        </style>
        <table border="1px" cellpadding="0" cellspacing="0" align="center">
            <tr>
                <td colspan="5" id="screen" height="50">0</td>
            </tr>
            <tr>
                <td class="num">0</td>
                <td class="num">.</td>
                <td id="clear" colspan="3" align="center">C</td>
            </tr>
            <tr>
                <td class="num">1</td>
                <td class="num">2</td>
                <td class="num">3</td>
                <td class="num">+</td>
                <td class="num">-</td>
            </tr>
            <tr>
                <td class="num">4</td>
                <td class="num">5</td>
                <td class="num">6</td>
                <td class="num">*</td>
                <td class="num">/</td>
            </tr>
            <tr>
                <td class="num">7</td>
                <td class="num">8</td>
                <td class="num">9</td>
                <td id="result" colspan="2" align="center">=</td>
            </tr>
        </table>
        <script>
            var screen = document.getElementById("screen")
            var result = document.getElementById("result")
            var clear = document.getElementById("clear")
            var num = document.getElementsByClassName("num")
            var run = 0

            clear.onclick = function () {
                screen.innerHTML = run = 0
            }

            result.onclick = function () {
                screen.innerHTML = run = eval(run)
            }

            for (let i = 0; i < num.length; i++) {
                num[i].onclick = function () {
                    console.info(i)
                    if (run == 0) run = ""
                    run += num[i].innerHTML
                    screen.innerHTML = run
                }
            }

        </script>
    </div>

    <div>
        <script>
            // 开启js的严格模式，浏览器调试可以看到错误
            // "use strict";
            function change(view) {
                var str = view.innerHTML;
                var txt = str.replace(/正则表达式/i, "正则表达式示例");
                view.innerHTML = txt
            }
            x = 5
        </script>
        <div onclick="change(this)" style="cursor: pointer">这是正则表达式,点我替换文本</div>
    </div>

    <div>
        <script>
            function up() {
                // view = document.getElementById('name1')
                // name = view.value
                name = document.forms["name1"].value;
                if (name == null || name == "") {
                    alert("姓名不能为空")
                    return false
                }
            }
        </script>
        提交表单,不满足需求不上传
        <form action="" onsubmit="return up()">
            <!-- 也可以加上这个属性，空的时候不上传 required="required" -->
            姓名：<input id="name1" type="text" name="name" required="required" pattern="[a-zA-Z]+">
            <input type="submit" value="上传啦">
        </form>
    </div>

    <div>
        <!-- 
        约束验证 HTML 输入属性

        disabled	规定输入的元素不可用
        max	        规定输入元素的最大值
        min	        规定输入元素的最小值
        pattern	    规定输入元素值的正则表达式
        required	规定输入元素字段是必需的
        type 	    规定输入元素的类型

        validity	布尔属性值，返回 input 输入值是否合法
        validationMessage	浏览器错误提示信息
        willValidate	指定 input 是否需要验证
        -->

        <!-- 
        示例  document.getElementById("id1").validity.rangeOverflow
        
        customError	设置为 true, 如果设置了自定义的 validity 信息。
        patternMismatch	设置为 true, 如果元素的值不匹配它的模式属性。
        rangeOverflow	设置为 true, 如果元素的值大于设置的最大值。
        rangeUnderflow	设置为 true, 如果元素的值小于它的最小值。
        stepMismatch	设置为 true, 如果元素的值不是按照规定的 step 属性设置。
        tooLong	设置为 true, 如果元素的值超过了 maxLength 属性设置的长度。
        typeMismatch	设置为 true, 如果元素的值不是预期相匹配的类型。
        valueMissing	设置为 true，如果元素 (required 属性) 没有值。
        valid	设置为 true，如果元素的值是合法的。 
        -->
        <script>
            function check() {
                var age = document.getElementById("age");
                if (age.checkValidity() == false) {
                    // validationMessage 存着自动的错误信息,可以通过setCustomValidity去设置
                    alert(age.validationMessage)
                }
            }
        </script>
        验证表单,不满足需求弹框显示
        <form action="">
            年龄：<input id="age" type="number" name="age" max="100" min="0" required>
            <button onclick="check()">验证</button>
        </form>
    </div>

    <div>
        <a href="javascript:void(0)">javascript:void(0),单此处什么也不会发生</a>
        <a href="javascript:void(alert('Warning!!!'))">javascript:void(alert('Warning!!!'))点我!</a>
    </div>

    <!-- 
        if (y === undefined) {
          y = 0;
        }
        等价于 
        y = y || 0;
     -->

    <div>
        arguments是参数的数组
        <script>
            x = findMax(1, 123, 500, 115, 44, 88);

            function findMax() {
                // arguments是参数的数组
                var i, max = arguments[0];

                if (arguments.length < 2) return max;

                for (i = 0; i < arguments.length; i++) {
                    if (arguments[i] > max) {
                        max = arguments[i];
                    }
                }
                return max;
            }
            document.getElementById("demo").innerHTML = x;
        </script>
    </div>

    <div>
        js中的构造函数
        <script>
            function myFunction(arg1, arg2) {
                this.firstName = arg1;
                this.lastName = arg2;
            }
            var x = new myFunction("John", "Doe")
        </script>
    </div>

    <div>
        在 JavaScript 中, 函数是对象。JavaScript 函数有它的属性和方法。
        call() 和 apply() 和bind() 是预定义的函数方法。 两个方法可用于调用函数，两个方法的第一个参数必须是对象本身。
        改变this的指向 bind是没执行的，call是普通参数，apply是argument(数组)的形式传参
        <script>

            var person2 = { name: "小叮当", age: 19 }

            function person1Method(name, age) {
                var name = name
                var age = age
                console.log(this, name, age)
            }
            person1Method.call(person2, "小岛call", 200)
            person1Method.apply(person2, ["小岛apply", 200])

            function person2Method(eyeColor) {
                return { name: this.name, age: this.age, eyeColor: eyeColor }
            }
            var person = person2Method.call(person2, "蓝色")
            console.log("person:", person)
        </script>
    </div>

    <div>
        <div onmouseover="mOver(this)" onmouseout="mOut(this)" onmousedown="mDown(this)" onmouseup="mUp(this)"
            style="background-color:#D94A38;width:120px;height:20px;padding:40px;margin: auto">Mouse Over Me</div>
        <script>
            function mOver(obj) {
                obj.innerHTML = "Click Me"
            }
            function mOut(obj) {
                obj.innerHTML = "Mouse Over Me"
            }
            function mDown(obj) {
                obj.innerHTML = "Thank You"
                obj.style.backgroundColor = "#00ffff"
            }
            function mUp(obj) {
                obj.innerHTML = "Click Me"
                obj.style.backgroundColor = "#D94A38"
            }
        </script>
    </div>

    <div>
        <script>
            function f(obj, focus) {
                obj.style.backgroundColor = focus ? '#ffff00' : '#ffffff'
                // 手动失去焦点
                // obj.blur()
            }
        </script>
        <input type="text" value="焦点测试" onfocus="f(this, true)" onblur="f(this, false)">
    </div>

    <div>
        <div id="div11" style="cursor: pointer">快点我(使用event添加事件)</div>
        <script>
            function easyClick() {
                alert("点我")
            }
            var view = document.getElementById("div11")
            // 第三个参数，默认值为 false, 即冒泡传递(内部事件先触发)，当值为 true 时, 事件使用捕获传递(外部事件先触发)
            view.addEventListener("click", easyClick)
            view.addEventListener("click", () => alert("又点我"))
            // view.removeEventListener("click", easyClick)
        </script>

        <!-- 
            鼠标事件
            onclick	        当用户点击某个对象时调用的事件句柄。	
            oncontextmenu	在用户点击鼠标右键打开上下文菜单时触发	 
            ondblclick	    当用户双击某个对象时调用的事件句柄。	
            onmousedown	    鼠标按钮被按下。	
            onmouseenter	当鼠标指针移动到元素上时触发。	
            onmouseleave	当鼠标指针移出元素时触发	
            onmousemove	    鼠标被移动。	
            onmouseover	    鼠标移到某元素之上。	
            onmouseout	    鼠标从某元素移开。	
            onmouseup	    鼠标按键被松开。 	 
            onmousewheel	已废弃。 使用 onwheel 事件替代	 
            onwheel	        该事件在鼠标滚轮在元素上下滚动时触发

            键盘事件
            onkeydown	    某个键盘按键被按下。	
            onkeypress	    某个键盘按键被按下并松开。	
            onkeyup	        某个键盘按键被松开。  
            
            框架/对象（Frame/Object）事件
            onabort	        图像的加载被中断。 ( <object>)	
            onbeforeunload	该事件在即将离开页面（刷新或关闭）时触发	
            onerror	        在加载文档或图像时发生错误。 ( <object>, <body>和 <frameset>)	 
            onhashchange	该事件在当前 URL 的锚部分发生修改时触发。	 
            onload	        一张页面或一幅图像完成加载。	
            onpageshow	    该事件在用户访问页面时触发	
            onpagehide	    该事件在用户离开当前网页跳转到另外一个页面时触发	
            onresize	    窗口或框架被重新调整大小。	
            onscroll	    当文档被滚动时发生的事件。	
            onunload	    用户退出页面。 ( <body> 和 <frameset>)	

            表单事件
            onblur	        元素失去焦点时触发	
            onchange	    该事件在表单元素的内容改变时触发( <input>, <keygen>, <select>, 和 <textarea>)	
            onfocus	        元素获取焦点时触发	
            onfocusin	    元素即将获取焦点时触发	
            onfocusout	    元素即将失去焦点时触发	
            oninput	        元素获取用户输入时触发	
            onreset	        表单重置时触发	
            onsearch	    用户向搜索域输入文本时触发 ( <input="search">)	 
            onselect	    用户选取文本时触发 ( <input> 和 <textarea>)	
            onsubmit	    表单提交时触发	            

            剪贴板事件
            oncopy	        该事件在用户拷贝元素内容时触发	 
            oncut	        该事件在用户剪切元素内容时触发	 
            onpaste	        该事件在用户粘贴元素内容时触发	

            打印事件
            onafterprint	该事件在页面已经开始打印，或者打印窗口已经关闭时触发	 
            onbeforeprint	该事件在页面即将开始打印时触发	 

            拖动事件
            ondrag	        该事件在元素正在拖动时触发	 
            ondragend	    该事件在用户完成元素的拖动时触发	 
            ondragenter	    该事件在拖动的元素进入放置目标时触发	 
            ondragleave	    该事件在拖动元素离开放置目标时触发	 
            ondragover	    该事件在拖动元素在放置目标上时触发	 
            ondragstart	    该事件在用户开始拖动元素时触发	 
            ondrop	        该事件在拖动元素放置在目标区域时触发

            多媒体（Media）事件
            onabort	        事件在视频/音频（audio/video）终止加载时触发。	 
            oncanplay	    事件在用户可以开始播放视频/音频（audio/video）时触发。	 
            oncanplaythrough	事件在视频/音频（audio/video）可以正常播放且无需停顿和缓冲时触发。	 
            ondurationchange	事件在视频/音频（audio/video）的时长发生变化时触发。	 
            onemptied	    当期播放列表为空时触发	 
            onended	        事件在视频/音频（audio/video）播放结束时触发。	 
            onerror	        事件在视频/音频（audio/video）数据加载期间发生错误时触发。	 
            onloadeddata	事件在浏览器加载视频/音频（audio/video）当前帧时触发触发。	 
            onloadedmetadata	事件在指定视频/音频（audio/video）的元数据加载后触发。	 
            onloadstart	    事件在浏览器开始寻找指定视频/音频（audio/video）触发。	 
            onpause	        事件在视频/音频（audio/video）暂停时触发。	 
            onplay	        事件在视频/音频（audio/video）开始播放时触发。	 
            onplaying	    事件在视频/音频（audio/video）暂停或者在缓冲后准备重新开始播放时触发。	 
            onprogress	    事件在浏览器下载指定的视频/音频（audio/video）时触发。	 
            onratechange	事件在视频/音频（audio/video）的播放速度发送改变时触发。	 
            onseeked	    事件在用户重新定位视频/音频（audio/video）的播放位置后触发。	 
            onseeking	    事件在用户开始重新定位视频/音频（audio/video）时触发。	 
            onstalled	    事件在浏览器获取媒体数据，但媒体数据不可用时触发。	 
            onsuspend	    事件在浏览器读取媒体数据中止时触发。	 
            ontimeupdate	事件在当前的播放位置发送改变时触发。	 
            onvolumechange	事件在音量发生改变时触发。	 
            onwaiting	    事件在视频由于要播放下一帧而需要缓冲时触发。

            动画事件
            animationend	该事件在 CSS 动画结束播放时触发	 
            animationiteration	该事件在 CSS 动画重复播放时触发	 
            animationstart	该事件在 CSS 动画开始播放时触发	

            过渡事件
            transitionend	该事件在 CSS 完成过渡后触发。	

            其他事件
            onmessage	    该事件通过或者从对象(WebSocket, Web Worker, Event Source 或者子 frame 或父窗口)接收到消息时触发
            ononline	    该事件在浏览器开始在线工作时触发。	 
            onoffline	    该事件在浏览器开始离线工作时触发。	 
            onpopstate	    该事件在窗口的浏览历史（history 对象）发生改变时触发。	 
            onshow	        该事件当 <menu> 元素在上下文菜单显示时触发	 
            onstorage	    该事件在 Web Storage(HTML 5 Web 存储)更新时触发	 
            ontoggle	    该事件在用户打开或关闭 <details> 元素时触发
            -->
    </div>

    <div id="addId">
        <script>
            function add() {
                var child = document.createElement("p")
                var text = document.createTextNode('~')
                child.appendChild(text)
                var parent = document.getElementById("addId")
                parent.appendChild(child)
                // parent.insertBefore(child, beforeId)  // 插在view中的beforeId的前面
                // parent.removeChild(child);  // 移除
                // parent.replaceChild(child, reChild)
            }
        </script>
        <button onclick="add()">js动态添加标签</button>
    </div>

    <div id="allId">
        <p>取本行文本，并变色</p>
        <p>line2</p>
        <script>
            var view = document.getElementById("allId")
            var viewp = view.getElementsByTagName("p")
            viewp[1].innerHTML = "<span style = 'color: red;'>" + viewp[0].innerHTML + 1 + "</span>"
        </script>
    </div>

    <div>
        phototype可以给对象添加新属性
        <script>
            function Person(first, last, age, eye) {
                this.firstName = first;
                this.lastName = last;
                this.age = age;
                this.eyeColor = eye;
            }
            Person.prototype.nationality = "English";
            var myFather = new Person("John", "Doe", 50, "blue");
            console.log(Person, " and ", myFather.nationality)
        </script>
    </div>

    <!-- 
        location.hostname       返回 web 主机的域名
        location.pathname       返回当前页面的路径和文件名
        location.port           返回 web 主机的端口 （80 或 443）
        location.protocol       返回所使用的 web 协议（http: 或 https:）
        location.href           当前页面的 URL
        location.pathname       URL 的路径名
        location.assign(url)    加载新的文档。
     -->

     <div>循环计时事件 -> var task = setInterval(function(){alert("Hello")},3000)  clearInterval(task)停止</div>
     <div>延时时间事件 -> var task = setTimeout(function(){alert("Hello")},3000)  clearTimeout(task)停止</div>
     <h4 style="text-align: center">Cookie</h4>
     <div>创建 -> document.cookie="username=John; time=20190103;"</div>
     <div>设置过期时间 -> document.cookie="username=John; expires=Thu, 18 Dec 2043 12:00:00 GMT";</div>
     <div>以使用 path 参数告诉浏览器 cookie 的路径。默认情况下，cookie 属于当前页面。 -> document.cookie="username=John Doe; expires=Thu, 18 Dec 2043 12:00:00 GMT; path=/";</div>
     <div>删除cookie -> 设置过期时间即可</div>
</body>

</html>